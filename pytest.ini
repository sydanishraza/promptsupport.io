[pytest]
# KE-PR10: Golden Tests Pytest Configuration

# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Async support
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function

# Output configuration
addopts = 
    --strict-markers
    --strict-config
    --verbose
    --tb=short
    --color=yes
    --durations=10

# Markers for test categorization
markers =
    asyncio: Async test functions
    golden: Golden test fixtures for regression protection
    integration: Integration tests requiring external dependencies
    unit: Fast unit tests
    slow: Slow tests that take > 1 second
    pipeline: V2 pipeline processing tests
    repository: Repository pattern tests
    ticket3: TICKET-3 field validation tests
    coverage: Coverage threshold enforcement tests
    
# Minimum version requirements
minversion = 6.0

# Test timeout (5 minutes for golden tests)
timeout = 300

# Coverage configuration
coverage_report_term_missing = true
coverage_report_html = htmlcov
coverage_report_xml = coverage.xml

# Logging configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Filter warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::FutureWarning
    
# Golden test specific settings
golden_tolerance_coverage = 0.5
golden_tolerance_float = 0.1
golden_update_baselines = false